(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(16),a=t.n(r),o=(t(21),t(7)),u=t(3),l=t(0),i=function(e){var n=e.name,t=e.phone,c=e.id,r=e.handleDelete;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:n}),Object(l.jsx)("td",{children:t}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{id:c,value:n,onClick:r,className:"deleteButton",children:"Delete"})})]})})},d=function(e){var n=e.persons,t=e.handleDelete;return console.log("Table Props: ",n),Object(l.jsx)("div",{children:Object(l.jsxs)("table",{id:"entries",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Phone Number"})]})}),Object(l.jsx)("tbody",{children:n.map((function(e){return Object(l.jsx)(i,{name:e.name,phone:e.number,id:e.id,handleDelete:t},e.name)}))})]})})},s=function(e){var n=e.handleFilter,t=e.filterQuery;return Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{id:"filterLabel",children:"Filter by Name: "}),Object(l.jsx)("input",{id:"filterInput",onChange:n,value:t})]})},b=function(e){var n=e.handleAddPerson,t=e.handleNameInput,c=e.handlePhoneInput,r=e.newNumber,a=e.newName;return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{id:"namelabel",children:"Name: "}),Object(l.jsx)("input",{id:"name",onChange:t,value:a})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{id:"phonelabel",children:"Phone: "}),Object(l.jsx)("input",{id:"phoneInput",onChange:c,value:r})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"buttonBar",type:"submit",children:"Add"})})]})})},j=function(e){var n=e.handleAddPerson,t=e.handleNameInput,c=e.handlePhoneInput,r=e.newNumber,a=e.newName,o=e.clearInput,u=""===a&&""===r;return Object(l.jsxs)("div",{children:[Object(l.jsx)(b,{handleNameInput:t,handlePhoneInput:c,newName:a,newNumber:r,handleAddPerson:n}),u?"":Object(l.jsx)("button",{onClick:o,disabled:u,className:"buttonBar",children:"Clear"})]})},h=t(4),f=t.n(h),m="/api/persons",O=function(){return f.a.get(m).then((function(e){return e.data}))},p=function(e){return f.a.post(m,e).then((function(e){return e.data}))},x=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.notice;return null===n?null:Object(l.jsx)("div",{style:{backgroundColor:"#D0F5FB",border:"1px solid black",width:"75vw",boxShadow:"0px 0px 16px 4px #E5E5E5",margin:"10px",textIndent:"2rem"},children:Object(l.jsx)("h4",{children:n})})},w=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),b=i[0],h=i[1],f=Object(c.useState)(""),m=Object(u.a)(f,2),w=m[0],N=m[1],I=Object(c.useState)(""),P=Object(u.a)(I,2),y=P[0],k=P[1],E=Object(c.useState)(null),C=Object(u.a)(E,2),D=C[0],S=C[1];Object(c.useEffect)((function(){O().then((function(e){r(e),console.log("Response successful")}))}),[]);var T=t.filter((function(e){var n=y.replace(/[#-.]|[[-^]|[?|{}]/g,"\\$&");return new RegExp(n,"i").test(e.name)}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Phonebook"}),Object(l.jsx)(g,{notice:D}),Object(l.jsx)(j,{handleNameInput:function(e){return h(e.target.value)},handlePhoneInput:function(e){return N(e.target.value)},newName:b,newNumber:w,handleAddPerson:function(e){e.preventDefault();var n;n=b,t.some((function(e){return Object.values(e).includes(n)}))?window.confirm("".concat(b," is already added to phonebook, replace old number with new one?"))?function(e){var n=t.find((function(n){return n.name===e})),c=n.id;console.log("name: ",e,"Person: ",n);var a=Object(o.a)(Object(o.a)({},n),{},{number:w});v(c,a).then((function(n){S("Updated ".concat(e,"'s phone number")),setTimeout((function(){S(null)}),5e3),r(t.map((function(t){return t.name!==e?t:n})))})).catch((function(n){S("Error updating entry for ".concat(e,". ").concat(n.response.data.error)),setTimeout((function(){S(null)}),5e3)}))}(b):console.log("Update Cancelled"):function(){var e={name:b,number:w};console.log("PersonObj: ",e),p(e).then((function(e){O().then((function(e){r(e),S("Added ".concat(b)),setTimeout((function(){S(null)}),5e3)})),h(""),N("")})).catch((function(e){S(e.response.data.error),setTimeout((function(){S(null)}),5e3)}))}()},clearInput:function(){h(""),N("")}}),Object(l.jsx)("br",{}),Object(l.jsx)(s,{handleFilter:function(e){return k(e.target.value)},value:y}),Object(l.jsx)("h1",{children:"Numbers"}),Object(l.jsx)(d,{persons:T,handleDelete:function(e){var n=e.target.id;window.confirm("Confirm delete ".concat(e.target.value," ? "))?x(n).then((function(n){S("Entry for ".concat(e.target.value," deleted")),setTimeout((function(){S(null)}),5e3),O().then((function(e){r(e)}))})).catch((function(n){S("Error: Entry for ".concat(e.target.value," has already been deleted")),setTimeout((function(){S(null)}),5e3),r(t.filter((function(n){return n.name!==e.target.value})))})):console.log("delete cancelled")}})]})};a.a.render(Object(l.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.355b1145.chunk.js.map